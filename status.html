<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admission Status - Sunrise Educational Centre</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
  <link rel="stylesheet" href="style.css" />
  <style>
    body.dark-mode .navbar { background: rgba(35,41,70,0.95); border-bottom: 1px solid #44476a; }
    body.dark-mode .nav-links a { color: #e0e7ff; }
    body.dark-mode .nav-links a:hover { background:#44476a; color:#6a82fb; }
    body.dark-mode .footer { background:#0f1221; color:#e2e8f0; }
    body.dark-mode .footer a { color:#93c5fd; }
    body.dark-mode .footer a:hover { color:#bfdbfe; }
    
    .status-container { max-width: 800px; margin: 2rem auto; padding: 0 1rem; }
    .status-card { background: #fff; border-radius: 16px; border: 1px solid #e0e7ff; box-shadow: 0 4px 16px rgba(100,100,255,0.08); padding: 2rem; margin-bottom: 2rem; }
    .status-header { text-align: center; margin-bottom: 2rem; }
    .status-title { font-size: 2rem; font-weight: 700; color: #232946; margin-bottom: 0.5rem; }
    .status-subtitle { font-size: 1.1rem; color: #666; }
    
    .status-info { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
    .info-item { background: #f8f9ff; border: 1px solid #e0e7ff; border-radius: 12px; padding: 1.5rem; }
    .info-label { font-weight: 600; color: #232946; font-size: 0.95rem; margin-bottom: 0.5rem; }
    .info-value { color: #666; font-size: 1.1rem; }
    
    .credentials-section { background: #f0fff4; border: 1px solid #c6f6d5; border-radius: 12px; padding: 2rem; margin-bottom: 2rem; }
    .credentials-title { color: #38a169; font-size: 1.5rem; font-weight: 600; margin-bottom: 1.5rem; text-align: center; }
    .credentials-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem; }
    .credential-item { background: #fff; padding: 1.5rem; border-radius: 8px; border: 1px solid #c6f6d5; }
    .credential-label { font-size: 0.9rem; color: #666; margin-bottom: 0.5rem; }
    .credential-value { font-family: monospace; background: #f7fafc; padding: 1rem; border-radius: 6px; border: 1px solid #e2e8f0; color: #2d3748; font-weight: 600; font-size: 1.1rem; word-break: break-all; }
    .credentials-note { background: #fff; padding: 1rem; border-radius: 8px; border: 1px solid #c6f6d5; font-size: 0.9rem; color: #666; line-height: 1.5; }
    
    .action-buttons { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
    .btn { padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; transition: all 0.2s; display: inline-block; text-align: center; }
    .btn-primary { background: #6a82fb; color: white; border: none; }
    .btn-primary:hover { background: #5a6fd8; transform: translateY(-1px); }
    .btn-secondary { background: #e2e8f0; color: #4a5568; border: none; }
    .btn-secondary:hover { background: #cbd5e0; transform: translateY(-1px); }
    .btn-success { background: #48bb78; color: white; border: none; }
    .btn-success:hover { background: #38a169; transform: translateY(-1px); }
    
    .status-badge { display: inline-block; padding: 0.5rem 1rem; border-radius: 20px; font-weight: 600; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px; }
    .status-approved { background: #f0fff4; color: #38a169; border: 1px solid #c6f6d5; }
    .status-pending { background: #fffaf0; color: #d69e2e; border: 1px solid #f6e05e; }
    .status-rejected { background: #fed7d7; color: #e53e3e; border: 1px solid #fc8181; }
    
    .welcome-message { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 12px; padding: 2rem; text-align: center; margin-bottom: 2rem; }
    .welcome-title { font-size: 1.8rem; font-weight: 700; margin-bottom: 1rem; }
    .welcome-text { font-size: 1.1rem; opacity: 0.9; line-height: 1.6; }
    
    @media (max-width: 768px) {
      .status-container { padding: 0 0.5rem; }
      .status-card { padding: 1.5rem; }
      .credentials-grid { grid-template-columns: 1fr; }
      .action-buttons { flex-direction: column; }
      .btn { width: 100%; }
    }
    
    /* Dark Mode Styles */
    body.dark-mode .status-card { background: #232946; border-color: #444a6d; }
    body.dark-mode .status-title { color: #fff; }
    body.dark-mode .status-subtitle { color: #b8c5d6; }
    body.dark-mode .info-item { background: #2a2a3a; border-color: #3a3a4a; }
    body.dark-mode .info-label { color: #e0e7ff; }
    body.dark-mode .info-value { color: #b8c5d6; }
    body.dark-mode .credentials-section { background: #1a2a1a; border-color: #2d5a2d; }
    body.dark-mode .credentials-title { color: #4ade80; }
    body.dark-mode .credential-item { background: #2a2a3a; border-color: #3a3a4a; }
    body.dark-mode .credential-value { background: #1a1a2e; border-color: #3a3a4a; color: #e2e8f0; }
    body.dark-mode .credentials-note { background: #2a2a3a; border-color: #3a3a4a; color: #b8c5d6; }
    body.dark-mode .welcome-message { background: linear-gradient(135deg, #4c51bf 0%, #553c9a 100%); }
    
    /* Dark mode for status badges */
    body.dark-mode .status-approved { background: #1a2a1a; color: #4ade80; border-color: #2d5a2d; }
    body.dark-mode .status-pending { background: #2a2a1a; color: #fbbf24; border-color: #744210; }
    body.dark-mode .status-rejected { background: #2a1a1a; color: #f87171; border-color: #742a2a; }
    
    /* Dark mode for form inputs */
    body.dark-mode input[type="text"], 
    body.dark-mode input[type="tel"] { 
      background: #1a1a2e; 
      border-color: #3a3a4a; 
      color: #fff; 
    }
    
    body.dark-mode input[type="text"]:focus, 
    body.dark-mode input[type="tel"]:focus { 
      border-color: #6a82fb; 
      box-shadow: 0 0 0 3px rgba(106,130,251,0.22); 
    }
    
    body.dark-mode label { color: #e0e7ff; }
  </style>
</head>
<body>
  <nav class="navbar glassmorphic">
    <div class="container nav-content">
      <div class="nav-logo">
        <img src="attached_assets/image_1750584670920.png" alt="Logo">
      </div>
      <ul class="nav-links">
        <li><a href="/">Home</a></li>
        <li><a href="/admission">Admission</a></li>
        <li><a href="/study-resources">Study Resources</a></li>
        <li><a href="/forum">Forum</a></li>
        <li><a href="/online-class">Live Class</a></li>
        <li><button id="darkModeToggle" class="btn btn-primary" style="min-width:160px; margin-left:1rem;">üåô Dark Mode</button></li>
      </ul>
    </div>
  </nav>

  <main class="status-container">
    {% if result %}
      <div class="status-card">
        <div class="status-header">
          <h1 class="status-title">Admission Status</h1>
          <div class="status-badge status-{{ status|lower }}">{{ status|upper }}</div>
        </div>
        
        <div class="status-info">
          <div class="info-item">
            <div class="info-label">Student Name</div>
            <div class="info-value">{{ details.student_name }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Class</div>
            <div class="info-value">{{ details.class }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">School</div>
            <div class="info-value">{{ details.school_name }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Submitted</div>
            <div class="info-value">{{ details.submitted_at }}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Paid Status</div>
            <div class="info-value">{{ paid_status|title }}</div>
          </div>
          {% if details.phone %}
          <div class="info-item">
            <div class="info-label">Phone</div>
            <div class="info-value">{{ details.phone }}</div>
          </div>
          {% endif %}
        </div>
        
        {% if status == 'approved' %}
          <div class="welcome-message">
            <h2 class="welcome-title">üéâ Welcome to Sunrise Education Centre!</h2>
            <p class="welcome-text">
              Congratulations! Your admission has been approved. You now have access to our comprehensive study resources, 
              live classes, and personalized coaching programs. Your journey to academic excellence starts here!
            </p>
          </div>
          
          <div class="credentials-section">
            <h3 class="credentials-title">üîê Your Student Portal Credentials</h3>
            <div class="credentials-grid">
              <div class="credential-item">
                <div class="credential-label">Username</div>
                <div class="credential-value" id="username">{{ details.student_name|lower|replace(' ', '') }}{{ details.class }}</div>
              </div>
              <div class="credential-item">
                <div class="credential-label">Password</div>
                <div class="credential-value" id="password">{{ details.student_name|lower|replace(' ', '') }}@{{ details.class }}</div>
              </div>
            </div>
            <div class="credentials-note">
              <strong>Important:</strong> Please save these credentials safely. You can use them to log into your student portal 
              and access study resources, live classes, forum discussions, and more. For security reasons, these credentials 
              are only shown here and not sent via public notifications.
            </div>
            <div class="action-buttons" style="margin-top: 1.5rem;">
              <button onclick="copyCredentials()" class="btn btn-secondary">üìã Copy Credentials</button>
              <a href="/auth" class="btn btn-primary">üöÄ Login to Student Portal</a>
            </div>
          </div>
          
          <div class="status-card" style="background: #f8f9ff; border-color: #e0e7ff;">
            <h3 style="color: #6a82fb; margin-bottom: 1rem;">What's Next?</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
              <div style="text-align: center; padding: 1rem;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìö</div>
                <div style="font-weight: 600; color: #232946;">Study Resources</div>
                <div style="font-size: 0.9rem; color: #666; margin-top: 0.3rem;">Access comprehensive study materials</div>
              </div>
              <div style="text-align: center; padding: 1rem;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üé•</div>
                <div style="font-weight: 600; color: #232946;">Live Classes</div>
                <div style="font-size: 0.9rem; color: #666; margin-top: 0.3rem;">Join interactive online sessions</div>
              </div>
              <div style="text-align: center; padding: 1rem;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üí¨</div>
                <div style="font-weight: 600; color: #232946;">Forum</div>
                <div style="font-size: 0.9rem; color: #666; margin-top: 0.3rem;">Connect with other students</div>
              </div>
            </div>
          </div>
          
        {% elif status == 'pending' %}
          <div class="status-card" style="background: #fffaf0; border-color: #f6e05e;">
            <h3 style="color: #d69e2e; margin-bottom: 1rem;">‚è≥ Application Under Review</h3>
            <p style="color: #744210; line-height: 1.6;">
              Your admission application is currently being reviewed by our team. This process typically takes 2-3 business days. 
              You will receive a notification once the review is complete. Please ensure all required documents are submitted.
            </p>
            <div class="action-buttons" style="margin-top: 1rem;">
              <a href="/admission" class="btn btn-secondary">Update Application</a>
              <a href="/" class="btn btn-primary">Back to Home</a>
            </div>
          </div>
          
        {% elif status == 'rejected' %}
          <div class="status-card" style="background: #fed7d7; border-color: #fc8181;">
            <h3 style="color: #e53e3e; margin-bottom: 1rem;">‚ùå Application Not Approved</h3>
            <p style="color: #742a2a; line-height: 1.6;">
              We regret to inform you that your admission application could not be approved at this time. 
              This may be due to incomplete documentation, eligibility criteria not met, or other factors. 
              Please contact our admission office for more details or to discuss alternative options.
            </p>
            <div class="action-buttons" style="margin-top: 1rem;">
              <a href="/admission" class="btn btn-secondary">Reapply</a>
              <a href="/" class="btn btn-primary">Back to Home</a>
            </div>
          </div>
        {% endif %}
      </div>
      
    {% else %}
      <div class="status-card">
        <div class="status-header">
          <h1 class="status-title">Check Admission Status</h1>
          <p class="status-subtitle">Enter your admission details to view your current status</p>
        </div>
        
        <form method="POST" action="/check-status" style="max-width: 500px; margin: 0 auto;">
          <div style="margin-bottom: 1rem;">
            <label for="admission_id" style="display: block; font-weight: 600; color: #232946; margin-bottom: 0.5rem;">Admission ID</label>
            <input type="text" id="admission_id" name="admission_id" required 
                   placeholder="e.g., ADM000123" 
                   style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
          </div>
          <div style="margin-bottom: 1.5rem;">
            <label for="phone" style="display: block; font-weight: 600; color: #232946; margin-bottom: 0.5rem;">Phone Number</label>
            <input type="tel" id="phone" name="phone" required 
                   placeholder="Your registered phone number" 
                   style="width: 100%; padding: 0.75rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
          </div>
          <div style="text-align: center;">
            <button type="submit" class="btn btn-primary" style="width: 100%;">Check Status</button>
          </div>
        </form>
        
        <div style="text-align: center; margin-top: 2rem;">
          <p style="color: #666; margin-bottom: 1rem;">Don't have an admission ID?</p>
          <a href="/admission" class="btn btn-secondary">Apply for Admission</a>
        </div>
      </div>
    {% endif %}
  </main>

  <footer class="footer">
    <div class="container footer-content">
      <div class="footer-social">
        <a href="https://www.instagram.com/sunrise_education_centre?igsh=OGc5enlsanE0eWJ2" target="_blank">Instagram</a>
        <a href="https://www.youtube.com/@MohitNariyani" target="_blank">YouTube</a>
      </div>
      <div class="footer-links">
        <a href="#">Privacy Policy</a>
        <a href="#">Contact Us</a>
      </div>
      <div class="footer-copy">&copy; 2024 Sunrise Education Centre</div>
    </div>
  </footer>

  <script>
    function copyCredentials() {
      const username = document.getElementById('username').textContent;
      const password = document.getElementById('password').textContent;
      const credentials = `Username: ${username}\nPassword: ${password}`;
      
      if (navigator.clipboard) {
        navigator.clipboard.writeText(credentials).then(() => {
          showCopySuccess();
        }).catch(() => {
          fallbackCopyTextToClipboard(credentials);
        });
      } else {
        fallbackCopyTextToClipboard(credentials);
      }
    }
    
    function fallbackCopyTextToClipboard(text) {
      const textArea = document.createElement('textarea');
      textArea.value = text;
      textArea.style.position = 'fixed';
      textArea.style.left = '-999999px';
      textArea.style.top = '-999999px';
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();
      
      try {
        document.execCommand('copy');
        showCopySuccess();
      } catch (err) {
        console.error('Fallback: Oops, unable to copy', err);
        alert('Unable to copy credentials. Please copy them manually.');
      }
      
      document.body.removeChild(textArea);
    }
    
    function showCopySuccess() {
      const button = event.target;
      const originalText = button.textContent;
      button.textContent = '‚úÖ Copied!';
      button.style.background = '#48bb78';
      button.style.color = 'white';
      
      setTimeout(() => {
        button.textContent = originalText;
        button.style.background = '';
        button.style.color = '';
      }, 2000);
    }
    
    // Dark mode toggle functionality
    document.addEventListener('DOMContentLoaded', function() {
      const darkModeToggle = document.getElementById('darkModeToggle');
      if (darkModeToggle) {
        // Check current dark mode state
        const isDarkMode = localStorage.getItem('darkMode') === 'true';
        if (isDarkMode) {
          document.body.classList.add('dark-mode');
          updateToggleButton();
        }
        
        darkModeToggle.addEventListener('click', toggleDarkMode);
      }
    });
    
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      const isDarkMode = document.body.classList.contains('dark-mode');
      localStorage.setItem('darkMode', isDarkMode);
      updateToggleButton();
    }
    
    function updateToggleButton() {
      const button = document.getElementById('darkModeToggle');
      if (button) {
        const isDark = document.body.classList.contains('dark-mode');
        button.innerHTML = isDark ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
        button.style.background = isDark ? 'rgba(255,255,255,0.1)' : '#6a82fb';
        button.style.color = isDark ? '#fff' : '#fff';
        button.style.borderColor = isDark ? '#fff' : '#6a82fb';
      }
    }
  </script>
  <script src="script.js"></script>
</body>
</html>